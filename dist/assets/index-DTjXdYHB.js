var T=Object.defineProperty;var j=(l,t,e)=>t in l?T(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var a=(l,t,e)=>j(l,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();function k(l,t){return l.x<t.x+t.width&&l.x+l.width>t.x&&l.y<t.y+t.height&&l.y+l.height>t.y}function c(l,t){return Math.random()*(t-l)+l}function L(l){return l[Math.floor(Math.random()*l.length)]}class F{constructor(){a(this,"audioContext",null)}ensureAudioContext(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&this.audioContext.resume()}initAudio(){this.ensureAudioContext()}playSound(t,e,i=.3,n="sine"){if(this.ensureAudioContext(),!this.audioContext)return;const o=this.audioContext.currentTime,s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.audioContext.destination),s.type=n,s.frequency.setValueAtTime(t,o),r.gain.setValueAtTime(i,o),r.gain.exponentialRampToValueAtTime(.01,o+e),s.start(o),s.stop(o+e)}playCollisionSound(){this.playSound(200,.1,.4,"square"),setTimeout(()=>this.playSound(150,.1,.3,"square"),50)}playLevelPassSound(){this.playSound(523,.1,.3,"sine"),setTimeout(()=>this.playSound(659,.1,.3,"sine"),120),setTimeout(()=>this.playSound(784,.1,.3,"sine"),240),setTimeout(()=>this.playSound(1047,.2,.3,"sine"),360)}playFireworksSound(){this.playSound(800,.05,.25,"square")}}class M{constructor(){a(this,"particles",[])}createExplosion(t,e,i=50){const n=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffffff"];for(let o=0;o<i;o++){const s=Math.PI*2*o/i,r=c(150,350),h=Math.cos(s)*r,d=Math.sin(s)*r;this.particles.push({x:t,y:e,vx:h,vy:d,life:1,maxLife:c(.8,1.5),color:L(n)})}}update(t){this.particles.forEach(e=>{e.x+=e.vx*t,e.y+=e.vy*t,e.vy+=300*t,e.life-=t}),this.particles=this.particles.filter(e=>e.life>0)}render(t){this.particles.forEach(e=>{const i=Math.max(0,e.life/e.maxLife);t.save(),t.globalAlpha=i,t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,3,0,Math.PI*2),t.fill(),t.restore()})}hasParticles(){return this.particles.length>0}}class v{constructor(t,e,i,n){a(this,"location");a(this,"speed");a(this,"isAlive",!0);a(this,"color");a(this,"borderColor");this.location=t,this.speed={x:0,y:e},this.color=i,this.borderColor=n}move(t,e){this.location.y+=this.speed.y*t,this.location.y-100>e.height&&(this.isAlive=!1)}hasCollision(t){return k(this.getBounds(),t.getBounds())}}class A extends v{constructor(e,i,n,o,s){super(e,i,o,s);a(this,"radius");this.radius=n}getBounds(){return{x:this.location.x-this.radius,y:this.location.y-this.radius,width:this.radius*2,height:this.radius*2}}render(e){e.save(),e.beginPath(),e.arc(this.location.x,this.location.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill(),e.lineWidth=2,e.strokeStyle=this.borderColor,e.stroke(),e.restore()}}class z extends v{constructor(e,i,n,o,s,r){super(e,i,o,s);a(this,"size");a(this,"angle",0);a(this,"angularSpeed");this.size=n,this.angularSpeed=r}move(e,i){super.move(e,i),this.angle+=this.angularSpeed*e}getBounds(){return{x:this.location.x-this.size/2,y:this.location.y-this.size/2,width:this.size,height:this.size}}render(e){e.save(),e.translate(this.location.x,this.location.y),e.rotate(this.angle),e.fillStyle=this.color,e.strokeStyle=this.borderColor,e.lineWidth=2,e.beginPath();const i=this.size/2;e.rect(-i,-i,this.size,this.size),e.fill(),e.stroke(),e.restore()}}class N extends v{constructor(e,i,n,o,s,r){super(e,i,o,s);a(this,"size");a(this,"angle",0);a(this,"angularSpeed");this.size=n,this.angularSpeed=r}move(e,i){super.move(e,i),this.angle+=this.angularSpeed*e}getBounds(){return{x:this.location.x-this.size/2,y:this.location.y-this.size/2,width:this.size,height:this.size}}render(e){const i=this.size/2;e.save(),e.translate(this.location.x,this.location.y),e.rotate(this.angle),e.beginPath(),e.moveTo(0,-i),e.lineTo(i,i),e.lineTo(-i,i),e.closePath(),e.fillStyle=this.color,e.fill(),e.lineWidth=2,e.strokeStyle=this.borderColor,e.stroke(),e.restore()}}class I extends v{constructor(e,i,n,o){super(e,i,"#ffffff","#000000");a(this,"text");a(this,"fontSize");this.text=o,this.fontSize=n}getBounds(){const e=this.fontSize;return{x:this.location.x-e/2,y:this.location.y-e/2,width:e,height:e}}render(e){e.save(),e.font=`${this.fontSize}px system-ui`,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,this.location.x,this.location.y),e.restore()}}class B extends v{constructor(e,i,n=15){super(e,i,"#ffff00","#ffcc00");a(this,"size");a(this,"rotation",0);this.size=n}getBounds(){return{x:this.location.x-this.size,y:this.location.y-this.size,width:this.size*2,height:this.size*2}}move(e,i){this.rotation+=.1,super.move(e,i)}render(e){e.save(),e.translate(this.location.x,this.location.y),e.rotate(this.rotation),e.fillStyle=this.color,e.strokeStyle=this.borderColor,e.lineWidth=2;const i=5,n=this.size,o=this.size/2;e.beginPath();for(let s=0;s<i*2;s++){const r=s%2===0?n:o,h=s*Math.PI/i-Math.PI/2,d=Math.cos(h)*r,u=Math.sin(h)*r;s===0?e.moveTo(d,u):e.lineTo(d,u)}e.closePath(),e.fill(),e.stroke(),e.restore()}}class R extends v{constructor(e,i,n=15){super(e,i,"#00ccff","#0099cc");a(this,"size");this.size=n}getBounds(){return{x:this.location.x-this.size,y:this.location.y-this.size,width:this.size*2,height:this.size*2}}render(e){e.save(),e.translate(this.location.x,this.location.y),e.fillStyle=this.color,e.strokeStyle=this.borderColor,e.lineWidth=2,e.beginPath(),e.moveTo(0,-this.size),e.lineTo(this.size,0),e.lineTo(0,this.size),e.lineTo(-this.size,0),e.closePath(),e.fill(),e.stroke(),e.restore()}}class D{constructor(t,e,i,n,o){a(this,"location");a(this,"speed",{x:0,y:0});a(this,"width");a(this,"height");a(this,"color");a(this,"borderColor");a(this,"isAlive",!0);a(this,"moveSpeed",420);this.location=t,this.width=e,this.height=i,this.color=n,this.borderColor=o}moveLeft(t){this.location.x-=this.moveSpeed*t}moveRight(t){this.location.x+=this.moveSpeed*t}moveUp(t){this.location.y-=this.moveSpeed*t}moveDown(t){this.location.y+=this.moveSpeed*t}move(t,e){this.location.x<this.width/2&&(this.location.x=this.width/2),this.location.x>e.width-this.width/2&&(this.location.x=e.width-this.width/2),this.location.y<this.height/2&&(this.location.y=this.height/2),this.location.y>e.height-this.height/2&&(this.location.y=e.height-this.height/2)}getBounds(){return{x:this.location.x-this.width/2,y:this.location.y-this.height/2,width:this.width,height:this.height}}hasCollision(t){return k(this.getBounds(),t.getBounds())}render(t){const e=this.getBounds();t.save(),t.fillStyle=this.color,t.strokeStyle=this.borderColor,t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.restore()}}class G{constructor(t,e){this.startTime=t,this.factory=e}createGameObject(){return this.factory()}}class U{constructor(t,e,i,n,o){this.difficulty=t,this.duration=e,this.levelObjects=i,this.theme=n,this.kind=o}}class ${constructor(t,e){a(this,"width");a(this,"height");a(this,"gameObjects",[]);this.width=t,this.height=e}addObject(t){this.gameObjects.push(t)}removeDead(){this.gameObjects=this.gameObjects.filter(t=>t.isAlive)}}function q(l,t,e,i,n){const o=l/1e3,s=Math.floor(o*t*1.5),r=[],h=["üê∂","üê±","ü¶ä","üêª","üê∞","ü¶Å","üêº"],d=["üîß","üõ†","‚öô","üî©","ü™ö","üî®","ü™õ"];for(let u=0;u<s;u++){const p=c(0,l-500),f=c(40,e.width-40),m=c(-200,-40),O=80+t*30,C=190+t*60,y=c(O,C),b=c(28,48),w=b/2,E=()=>{if(i==="space")return new B({x:f,y:m},y,w);if(i==="ocean")return new R({x:f,y:m},y,w);if(n==="shapes"){const g=L(["circle","square","triangle"]),S=L(["#ff9f80","#ffdf6e","#85e3ff","#baffc9"]),P="#ffffff",x=c(-2.5,2.5);return g==="circle"?new A({x:f,y:m},y,w,S,P):g==="square"?new z({x:f,y:m},y,b,S,P,x):new N({x:f,y:m},y,b,S,P,x)}else if(n==="animals"){const g=L(h);return new I({x:f,y:m},y,b,g)}else{const g=L(d);return new I({x:f,y:m},y,b,g)}};r.push(new G(p,E))}return r.sort((u,p)=>u.startTime-p.startTime),new U(t,l,r,i,n)}class W{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"field");a(this,"player");a(this,"levels",[]);a(this,"currentLevelIndex",0);a(this,"levelStartTime",0);a(this,"lastFrameTime",0);a(this,"nextLevelObjectIndex",0);a(this,"status","IDLE");a(this,"animationFrameId",0);a(this,"leftPressed",!1);a(this,"rightPressed",!1);a(this,"upPressed",!1);a(this,"downPressed",!1);a(this,"stars",[]);a(this,"fireworks",new M);a(this,"audioManager",new F);a(this,"backgroundMusic",document.getElementById("background-music"));a(this,"levelPassedTimer",0);a(this,"levelPassedTimeoutId",null);a(this,"isLevelPassed",!1);a(this,"levelPassedStartTime",0);a(this,"statusLabel",document.getElementById("status"));a(this,"objectsLabel",document.getElementById("objects"));a(this,"timeLabel",document.getElementById("time"));a(this,"progressFill",document.getElementById("progress-fill"));a(this,"gameOverOverlay",document.getElementById("game-over-overlay"));a(this,"playAgainBtn",document.getElementById("btn-play-again"));a(this,"levelPassedOverlay",document.getElementById("level-passed-overlay"));a(this,"levelPassedText",document.getElementById("level-passed-text"));a(this,"nextLevelBtn",document.getElementById("btn-next-level"));a(this,"loop",t=>{if(this.status!=="RUNNING"){cancelAnimationFrame(this.animationFrameId);return}const i=(t-this.lastFrameTime)/1e3;this.lastFrameTime=t;const n=this.levels[this.currentLevelIndex],o=t-this.levelStartTime;for(;this.nextLevelObjectIndex<n.levelObjects.length&&n.levelObjects[this.nextLevelObjectIndex].startTime<=o;){const r=n.levelObjects[this.nextLevelObjectIndex].createGameObject();this.field.addObject(r),this.nextLevelObjectIndex++}this.leftPressed&&this.player.moveLeft(i),this.rightPressed&&this.player.moveRight(i),this.upPressed&&this.player.moveUp(i),this.downPressed&&this.player.moveDown(i),this.player.move(i,this.field),this.field.gameObjects.forEach(s=>s.move(i,this.field)),this.field.removeDead();for(const s of this.field.gameObjects)if(s.hasCollision(this.player)){this.handlePlayerHit();break}o>=n.duration&&this.field.gameObjects.length===0&&this.handleLevelFinished(),this.fireworks.update(i),this.updateHud(o,n.duration),this.renderFrame(),this.animationFrameId=requestAnimationFrame(this.loop)});a(this,"levelPassedLoop",t=>{const e=t-this.levelPassedStartTime,i=200;if(Math.floor(e/i)%1===0&&e%i<16){const o=c(100,this.canvas.width-100),s=c(100,this.canvas.height-100);this.fireworks.createExplosion(o,s,30),this.audioManager.playFireworksSound()}this.fireworks.update(.016),this.renderFrame(),e<5e3?this.animationFrameId=requestAnimationFrame(this.levelPassedLoop):this.advanceToNextLevel()});const e=t.getContext("2d");if(!e)throw new Error("Canvas 2D context not available");this.canvas=t,this.ctx=e,this.field=new $(t.width,t.height);const i=110,n=18;this.player=new D({x:t.width/2,y:t.height-n-12},i,n,"#22e246","#ffffff");for(let o=0;o<80;o++)this.stars.push({x:Math.random()*t.width,y:Math.random()*t.height});this.initControls(),this.resetLevels(),this.updateHud(0,0),this.renderFrame()}resetLevels(){this.levels=[];const t=25e3,e=["night","day","factory","ocean","space"],i=["shapes","animals","tools"],n=[.7,.85,.9,.95,1];for(let o=0;o<100;o++){const s=o%5,r=Math.floor(o/5),d=n[s]+r*.15,u=e[s],p=i[s%3];this.levels.push(q(t,d,this.field,u,p))}this.currentLevelIndex=0}start(){if(this.status==="RUNNING")return;this.audioManager.initAudio(),this.resetLevels(),this.currentLevelIndex=0,this.isLevelPassed=!1,this.status="RUNNING";const t=performance.now();this.field.gameObjects=[],this.player.isAlive=!0,this.levelStartTime=t,this.lastFrameTime=t,this.nextLevelObjectIndex=0,this.gameOverOverlay.classList.add("hidden"),this.levelPassedOverlay.classList.add("hidden"),this.backgroundMusic&&(this.backgroundMusic.currentTime=0,this.backgroundMusic.play().catch(()=>{})),this.statusLabel.textContent=`Status: RUNNING (Level ${this.currentLevelIndex+1}/${this.levels.length})`,this.loop(t)}pause(){this.status==="RUNNING"&&(this.status="PAUSED",this.statusLabel.textContent="Status: PAUSED",this.backgroundMusic&&this.backgroundMusic.pause())}resume(){this.status==="PAUSED"&&(this.status="RUNNING",this.statusLabel.textContent=`Status: RUNNING (Level ${this.currentLevelIndex+1}/${this.levels.length})`,this.lastFrameTime=performance.now(),this.backgroundMusic&&this.backgroundMusic.play(),this.loop(this.lastFrameTime))}stop(){this.status="STOPPED",this.isLevelPassed=!1,this.statusLabel.textContent="Status: STOPPED",this.gameOverOverlay.classList.add("hidden"),this.levelPassedOverlay.classList.add("hidden"),this.backgroundMusic&&(this.backgroundMusic.pause(),this.backgroundMusic.currentTime=0),cancelAnimationFrame(this.animationFrameId),this.field.gameObjects=[],this.updateHud(0,0),this.renderFrame()}handlePlayerHit(){this.status="STOPPED",this.statusLabel.textContent="Status: GAME OVER",this.gameOverOverlay.classList.remove("hidden"),this.audioManager.playCollisionSound()}handleLevelFinished(){this.status="STOPPED",this.isLevelPassed=!0,this.levelPassedStartTime=performance.now(),this.audioManager.playLevelPassSound();for(let t=0;t<5;t++){const e=c(100,this.canvas.width-100),i=c(100,this.canvas.height-100);this.fireworks.createExplosion(e,i,40),this.audioManager.playFireworksSound()}this.currentLevelIndex<this.levels.length-1?(this.levelPassedText.textContent=`You Pass Level ${this.currentLevelIndex+1}`,this.levelPassedOverlay.classList.remove("hidden"),this.animationFrameId=requestAnimationFrame(this.levelPassedLoop)):(this.status="FINISHED",this.statusLabel.textContent="Status: ALL LEVELS COMPLETE",this.levelPassedText.textContent=`You Pass Level ${this.currentLevelIndex+1} - ALL COMPLETE!`,this.levelPassedOverlay.classList.remove("hidden"))}advanceToNextLevel(){if(this.currentLevelIndex<this.levels.length-1){this.isLevelPassed=!1,this.currentLevelIndex++,this.levelPassedOverlay.classList.add("hidden");const t=performance.now();this.field.gameObjects=[],this.levelStartTime=t,this.lastFrameTime=t,this.nextLevelObjectIndex=0,this.status="RUNNING",this.statusLabel.textContent=`Status: RUNNING (Level ${this.currentLevelIndex+1}/${this.levels.length})`,this.animationFrameId=requestAnimationFrame(this.loop)}}renderFrame(){const t=this.ctx,e=this.canvas.width,i=this.canvas.height,n=this.levels[this.currentLevelIndex];if(t.save(),n.theme==="night"){const o=t.createLinearGradient(0,0,0,i);o.addColorStop(0,"#020617"),o.addColorStop(1,"#020b3d"),t.fillStyle=o,t.fillRect(0,0,e,i),t.fillStyle="#ffffff",this.stars.forEach(s=>{t.beginPath(),t.arc(s.x,s.y,1.5,0,Math.PI*2),t.fill()})}else if(n.theme==="day"){const o=t.createLinearGradient(0,0,0,i);o.addColorStop(0,"#9ad9ff"),o.addColorStop(1,"#e9f7ff"),t.fillStyle=o,t.fillRect(0,0,e,i),t.fillStyle="#6cc070",t.fillRect(0,i-40,e,40)}else if(n.theme==="factory"){const o=t.createLinearGradient(0,0,e,i);o.addColorStop(0,"#2b103e"),o.addColorStop(1,"#7e3ff2"),t.fillStyle=o,t.fillRect(0,0,e,i),t.fillStyle="rgba(255,255,255,0.1)";for(let s=0;s<6;s++){const r=s*e/6;t.fillRect(r,0,8,i)}}else if(n.theme==="ocean"){const o=t.createLinearGradient(0,0,0,i);o.addColorStop(0,"#1a5f7a"),o.addColorStop(.5,"#2a8fa5"),o.addColorStop(1,"#0d4a63"),t.fillStyle=o,t.fillRect(0,0,e,i),t.strokeStyle="rgba(255,255,255,0.15)",t.lineWidth=2;for(let s=0;s<5;s++)t.beginPath(),t.arc(e/2,i/2+s*40,60-s*10,0,Math.PI*2),t.stroke()}else if(n.theme==="space"){const o=t.createLinearGradient(0,0,e,i);o.addColorStop(0,"#000011"),o.addColorStop(.5,"#0a0033"),o.addColorStop(1,"#000022"),t.fillStyle=o,t.fillRect(0,0,e,i),t.fillStyle="rgba(255,255,255,0.8)";for(let s=0;s<15;s++){const r=Math.random()*e,h=Math.random()*i,d=Math.random()*1.5;t.beginPath(),t.arc(r,h,d,0,Math.PI*2),t.fill()}t.fillStyle="rgba(200,100,255,0.1)",t.fillRect(0,0,e/2,i/2)}t.restore(),this.player.render(t),this.field.gameObjects.forEach(o=>o.render(t)),this.fireworks.render(t)}updateHud(t,e){const i=t/1e3,n=e/1e3;this.objectsLabel.textContent=`Objects: ${this.field.gameObjects.length}`,this.timeLabel.textContent=`Time: ${i.toFixed(2)}s / ${n.toFixed(2)}s`;const o=e>0?Math.min(1,t/e):0;this.progressFill.style.width=`${o*100}%`}initControls(){const t=document.getElementById("btn-start"),e=document.getElementById("btn-pause"),i=document.getElementById("btn-resume"),n=document.getElementById("btn-stop");t.addEventListener("click",()=>this.start()),e.addEventListener("click",()=>this.pause()),i.addEventListener("click",()=>this.resume()),n.addEventListener("click",()=>this.stop()),this.playAgainBtn.addEventListener("click",()=>this.start()),this.nextLevelBtn.addEventListener("click",()=>this.advanceToNextLevel()),window.addEventListener("keydown",s=>{s.key==="ArrowLeft"||s.key==="a"||s.key==="A"?this.leftPressed=!0:s.key==="ArrowRight"||s.key==="d"||s.key==="D"?this.rightPressed=!0:s.key==="ArrowUp"||s.key==="w"||s.key==="W"?this.upPressed=!0:(s.key==="ArrowDown"||s.key==="s"||s.key==="S")&&(this.downPressed=!0)}),window.addEventListener("keyup",s=>{s.key==="ArrowLeft"||s.key==="a"||s.key==="A"?this.leftPressed=!1:s.key==="ArrowRight"||s.key==="d"||s.key==="D"?this.rightPressed=!1:s.key==="ArrowUp"||s.key==="w"||s.key==="W"?this.upPressed=!1:(s.key==="ArrowDown"||s.key==="s"||s.key==="S")&&(this.downPressed=!1)});const o=(s,r)=>{const h=this.canvas.getBoundingClientRect(),d=s-h.left,u=r-h.top;this.player.location.x=d*(this.canvas.width/h.width),this.player.location.y=u*(this.canvas.height/h.height)};this.canvas.addEventListener("pointerdown",s=>{o(s.clientX,s.clientY)}),this.canvas.addEventListener("pointermove",s=>{(s.buttons!==0||s.pressure>0)&&o(s.clientX,s.clientY)})}}const H=document.getElementById("game-canvas"),V=new W(H);window.game=V;
